Compression
===========

RLE
---

Huffman
-------
#huffman
* [What is Huffman Coding?](https://www.baseclass.io/huffman-coding/) 
* [How Computers Compress Text: Huffman Coding and Huffman Trees](https://www.youtube.com/watch?v=JsTptu56GM8&list=PL96C35uN7xGLLeET0dOWaKHkAlPsrkcha&index=3) Tom Scott 6min


* Visible huffman heatmap
    * [MONOSPACE](http://www.p01.org/MONOSPACE/): Flip dots with feelings, a JavaScript demo in 1021 bytes, winner of the 1024 bytes demo competition at Assembly 2020
        * [PNGStore](https://www.iamcal.com/png-store/)

* [Modern LZ Compression](https://glinscott.github.io/lz/index.html) - Gary Linscott 2021
    * walks through the components of a modern LZ compressor
    * create a compressor that can beat gzip while decompressing at almost the same speed — in less than 1000 lines
    * (beautiful single page layout with code)
* [lizard LZ5](https://github.com/inikep/lizard)
    * > Lizard (formerly LZ5) is an efficient compressor with very fast decompression. It achieves compression ratio that is comparable to zip/zlib and zstd/brotli (at low and medium compression levels) at decompression speed of 1000 MB/s and faster. 


New techniques
--------------
* [vectorly](https://vectorly.io/) Vector video on the web (startup beta) - this is a HARD problem - I don't know how far they will get

Algorithms
-----------

https://en.wikipedia.org/wiki/Discrete_cosine_transform

* [Lossless Text Compression](https://bilalonureskili.com/files/LTC_en.pdf)

Licencing
---------

* [An Invisible Tax on the Web: Video Codecs](https://blog.mozilla.org/blog/2018/07/11/royalty-free-web-video-codecs/)
    * H264 and H265 are patented codecs - playing video is not free
    * AV1 is open source

* [Qpus](https://wiki.xiph.org/OpusFAQ) - lossy audio codec


Image Compression
-----------------

* [[jpeg]]

* [Lossless Image Compression in O(n) Time](https://phoboslab.org/log/2021/11/qoi-fast-lossless-image-compression)
    * Introducing QOI — the Quite OK Image format. 
    * It losslessly compresses RGB and RGBA images to a similar size of PNG, while offering a 20x-50x speedup in compression and 3x-4x speedup in decompression. All single-threaded, no SIMD. It's also stupidly simple.
    * tl;dr: 300 lines of C, single header, 
    * Somewhere between RLE and LZW

* PNG
    * [The smallest 256x256 single-color PNG file, and where you've seen it](https://www.mjt.me.uk/posts/smallest-png/)
        * #huffman #rle
    * [‘optiPNG’ vs ‘PNGcrush’ vs ‘Gimp’ to Reduce PNG Size](https://rubysash.com/programming/wordpress/optipng-vs-pngcrush-vs-gimp-to-reduce-png-size/)

### AVIF
* [Web developer's guide to AVIF images](https://darekkay.com/blog/avif-images/) #avif


Video
-----

* [Digital Video File Formats - Understanding QuickTime and Video for Windows](http://archive.retro.co.za/CDROMs/DrDobbs/CD%20Release%2012/articles/1994/9413/9413b/9413b.htm) 1994
* [H.264 is Magic](https://sidbala.com/h-264-is-magic/)
    * High level overview of the components of video compression with simple metrics

HOLY SHIT AV1!!!
from [av1_presentation.pdf](https://www.mlug-au.org/lib/exe/fetch.php?media=av1_presentation.pdf)
```
ffmpeg -i input.mp4 -c:v libsvtav1 -preset 4 -qp 50 -sc_detection true -pix_fmt yuv420p10le -g 240 -sn -c:a libopus -ac 2 svt-av1.webm
```

Audio
-----

* [[audio]]
* metadata and payload data
    * [embedded-lyrics](https://cweiske.de/tagebuch/embedded-lyrics.htm) in ogg

Cloud
-----

* [How Facebook encodes your videos](https://engineering.fb.com/2021/04/05/video-engineering/how-facebook-encodes-your-videos/)
    * Using AI to target encoding

[//begin]: # "Autogenerated link references for markdown compatibility"
[jpeg]: jpeg.md "JPEG"
[audio]: audio.md "Audio"
[//end]: # "Autogenerated link references"